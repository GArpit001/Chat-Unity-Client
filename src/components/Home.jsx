import React from 'react'
import { useEffect, useState, useContext } from 'react'
import { myContext } from "../Context/context"

import '../App.css'

import Login from './Authentication/Login'
import Signup from './Authentication/Signup'
import { useLocation, useNavigate } from 'react-router-dom'




const Home = () => {
    const [count, setCount] = useState(1)

    const allStates = useContext(myContext)
    const { user, setUser } = allStates

    const history = useNavigate()
    const location = useLocation()


    // console.log(location.pathname)

    useEffect(() => {
        const user = JSON.parse(localStorage.getItem("userInfo"))
        if (user) {
            setUser(user)
            // console.log(user)
            history("/chat")
        }
    }, [history])

    useEffect(() => {

    }, [count])



    // ????????????????????????????????????????????????????????????????????????????????????????????????????? ////
    // ????????????????????????????????????????????????????????????????????????????????????????????????????? ////
    // ????????????????????????????????????????????????????????????????????????????????????????????????????? ////
    // ????????????????????????????????????????????????????????????????????????????????????????????????????? ////
    // ????????????????????????????????????????????????????????????????????????????????????????????????????? ////



    return (
        <section className="back bg-[#2525276a] ">
            <div className=" flex  flex-col items-center  px-6 py-8  mx-auto md:h-screen lg:py-0">
                <div className="flex justify-center rounded-lg items-center mt-14 mb-4 text-2xl p-[6px] font-semibold bg-[#1111128f]   w-full sm:max-w-md  border border-b-0 border-l-0 border-slate-100  ">
                    <h1 className='text-white'>
                        Chat Unity
                    </h1>
                </div>
                <div className="w-full bg-[#111112db] rounded-lg shadow  md:mt-0 sm:max-w-md xl:p-0  ">
                    <div className="p-4  border border-r-0 border-b-0 rounded-lg border-slate-100">
                        <div className="  border-gray-200 dark:border-gray-700">
                            <ul className="flex justify-center flex-wrap -mb-px text-sm font-medium text-center " id="default-tab" data-tabs-toggle="#default-tab-content" role="tablist">

                                <li className={`me-2 w-[45%] h-[36px] rounded-lg ${count === 1 ? "bg-[#00000081] border text-blue-700 border-l-0 border-r-0 " : "text-white"}`} role="presentation ">
                                    <button className=" inline-block py-1.5 px-4 rounded-t-lg  " id="profile-tab" data-tabs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false" onClick={() => { setCount(1) }} >
                                        <i className="ri-login-box-line mr-2"></i>   Login
                                    </button>
                                </li>



                                <li className={`me-2 w-[45%] h-[36px] rounded-lg ${count === 2 ? "bg-[#00000081] text-red-500 border border-l-0 border-r-0" : "text-white"}`} role="presentation">
                                    <button className="inline-block py-1.5 px-4 rounded-t-lg  " id="dashboard-tab" data-tabs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="false" onClick={() => { setCount(2) }} >
                                        <i className="fa-solid fa-user-plus mr-2"></i>     Sign Up
                                    </button>
                                </li>

                            </ul>
                        </div>
                        <div id="default-tab-content" >
                            <div className={`${count === 2 ? "hidden" : ""} p-6 rounded-lg`} id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                <Login />

                            </div>
                            <div className={`${count === 1 ? "hidden" : ""} p-1 rounded-lg`} id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                                <Signup count={count} setCount={setCount} />
                            </div>

                        </div>



                    </div>
                </div>

                <div className=' font-medium '>
                    <p className="text-white text-center mt-[4rem]">
                        Copyright &copy;2024 All rights reserved || <span className="text-white ">CODE WORLD</span>
                    </p>
                </div>
            </div>
        </section>

    )
}

export default Home
